import type { NextPage } from "next";
import Head from "next/head";
import Image from "next/image";
import styles from "../styles/Home.module.css";
import dayjs from "dayjs";

const times = [
  "6:00 AM",
  "7:00 AM",
  "8:00 AM",
  "9:00 AM",
  "10:00 AM",
  "11:00 AM",
  "12:00 PM",
  "1:00 PM",
  "2:00 PM",
  "3:00 PM",
  "4:00 PM",
  "5:00 PM",
  "6:00 PM",
  "7:00 PM",
];

const calendar = [
  {
    time: "6:00 AM",
    name: "Vata Flow",
    teacher: "Ekansh",
    days: [1, 2, 3, 4, 5],
  },
  {
    time: "6:00 AM",
    name: "Meditation",
    teacher: "Isa",
    days: [0, 6],
  },
  {
    time: "7:00 AM",
    name: "Power Flow",
    teacher: "Anokhi",
    days: [1, 3, 5],
  },
  {
    time: "9:00 AM",
    name: "Restorative",
    teacher: "Joe",
    days: [0, 3, 6],
  },
  {
    time: "12:00 PM",
    name: "Vata Flow",
    teacher: "Megan",
    days: [0, 2, 4, 5, 6],
  },
  {
    time: "2:00 PM",
    name: "Handstand",
    teacher: "Alyssa",
    days: [0, 6],
  },
  {
    time: "4:00 PM",
    name: "Flow 3",
    teacher: "Alyssa",
    days: [3, 5],
  },
  {
    time: "6:00 PM",
    name: "Intro to Yoga",
    teacher: "Mikayla",
    days: [1, 3, 5],
  },
  {
    time: "6:00 PM",
    name: "Flow 2",
    teacher: "Becca",
    days: [0, 2, 4],
  },
];

const Home: NextPage = () => {
  return (
    <div className={styles.container}>
      <Head>
        <title>vata | yoga</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <main className={styles.main}>
        <h1 className={styles.title}>
          <span>vata yoga</span>
        </h1>

        <p className={styles.description}>
          <code>a vinyasa studio in NYC</code>
        </p>

        <table className={styles.table}>
          <thead>
            <tr>
              <td></td>
              <td>Sunday</td>
              <td>Monday</td>
              <td>Tuesday</td>
              <td>Wednesday</td>
              <td>Thursday</td>
              <td>Friday</td>
              <td>Saturday</td>
            </tr>
          </thead>
          <tbody>
            {times.map((time) => {
              return (
                <tr key={time}>
                  <td>{time}</td>
                  {[0, 1, 2, 3, 4, 5, 6].map((day) => {
                    const key = `${time}/${day}`;
                    const classObj = calendar.find(
                      ({ time: classTime, days }) =>
                        days.includes(day) && classTime === time
                    );
                    if (!classObj) {
                      return <td key={key} />;
                    }

                    const { name, teacher } = classObj;

                    return (
                      <td key={key}>
                        <div>{name}</div>
                        <div className={styles.teacher}>{teacher}</div>
                      </td>
                    );
                  })}
                </tr>
              );
            })}
          </tbody>
        </table>
        <div className={styles.schedule}>
          {[0, 1, 2, 3, 4, 5, 6].map((day) => {
            return (
              <div key={day}>
                <h3>
                  {
                    [
                      "Sunday",
                      "Monday",
                      "Tuesday",
                      "Wednesday",
                      "Thursday",
                      "Friday",
                      "Saturday",
                    ][day]
                  }
                </h3>
                <ul className={styles.ul}>
                  {calendar.map(({ days, name, time, teacher }) => {
                    const key = `${time}/${day}`;
                    if (!days.includes(day)) {
                      return null;
                    }

                    return (
                      <li key={key}>
                        {time}: {name} with {teacher}
                      </li>
                    );
                  })}
                </ul>
              </div>
            );
          })}
        </div>
      </main>

      <footer className={styles.footer}>vata | 584 Broadway | e@sk.io</footer>
    </div>
  );
};

export default Home;
